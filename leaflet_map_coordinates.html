<!DOCTYPE html>
<html>
<head>
	<title>Sample leaflet coordinate recorder</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8">
	<script src="lib/leaflet.js"></script>
    <script src="lib/jquery.js"></script>
	<link rel="stylesheet" href="css/leaflet.css" />
	<!--[if lte IE 8]>
		<link rel="stylesheet" href="css/leaflet.ie.css" />
	<![endif]-->
</head>
<body>
	<!-- Declaring a placeholder for the map -->
	<div id="map" style="width: 640px; height: 420px">
	</div>

	<div id="coords_output">Please click the mouse (to select the checkbox) and start recording the coordinates 
		<div>
			Check this box when you want to start recording the coordinates:<input type="checkbox" name="recordcoords" id="recordcoords"/>
		</div>
	</div>
	<script>
       
	    var map = L.map('map').setView(your map center, your map zoom level);
		//overriding the default path to the images folder
		L.Icon.Default.imagePath = "images";
	
		L.tileLayer('url for your map tile', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>'
		}).addTo(map);


		function onMouseDown(e) {
			if($('#recordcoords').prop('checked')) {
		 	  console.log(e.latlng.toString());
		 	  $('#coords_output').append(e.latlng.toString()+'<BR>');
		 	  //Using the default marker for now
		 	  L.marker([e.latlng.lat,e.latlng.lng]).addTo(map)
			}
			
		}
		
		function startstopListening(e) {
			if(!$('#recordcoords').prop('checked'))
			  console.log('Listening');
			else
			  console.log('Stopped Listening');
			//toggling the checkbox on a mousedown event
			$('#recordcoords').prop('checked',!$('#recordcoords').prop('checked'));
			
		}
		
 		map.on('mousedown',startstopListening);
 		map.on('mousemove',onMouseDown);
 		
	</script>
</body>
</html>
